
<!DOCTYPE html>

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Übung: Waldanteil berechnen &#8212; Coding in GIS</title>
    
  <link rel="stylesheet" href="_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/sphinx-book-theme.bfb7730f9caf2ec0b46a44615585038c.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.30270b6e4c972e43c488.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/translations.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/favicon.png"/>
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="next" title="Basic shortcuts for Jupyter lab" href="04_01_Jupyter_Shortcuts.html" />
    <link rel="prev" title="Übung: GIS in Python" href="03_05_GIS_in_Python.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/zhaw_lsfm_iunr_blau.jpg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Coding in GIS</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Dieses Buch durchsuchen ..." aria-label="Dieses Buch durchsuchen ..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   Willkommen bei Coding in GIS
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Coding in GIS I
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="01_01_Coding_in_GIS_1.html">
   Einleitung zu diesem Block
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01_02_Primitive_Datentypen.html">
   Aufgabe 1: Primitive Datentypen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01_03_Zusammengesetzte_Datentypen.html">
   Komplexe Datentypen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01_04_Listen.html">
   Aufgabe 2: Listen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01_05_Dictionary.html">
   Aufgabe 3: Dictionaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01_06_Tabellarische_Daten.html">
   Aufgabe 4: Tabellarische Daten
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Coding in GIS II
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="02_01_Coding_in_GIS_2.html">
   Einleitung zu diesem Block
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_02_Conda_Cheatsheet.html">
   Conda cheat sheet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_03_Python_Module.html">
   Python Modules
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_04_Functions_I.html">
   Aufgabe 5:
   <em>
    Function
   </em>
   Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_05_Functions_II.html">
   Aufgabe 6:
   <em>
    Function
   </em>
   Advanced
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_06_Zufallzahlen.html">
   Aufgabe 7: Zufallszahlen generieren
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_07_Funktionen_in_DataFrames.html">
   Aufgabe 8: Funktionen in
   <em>
    DataFrames
   </em>
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Coding in GIS III
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="03_01_Coding_in_GIS_3.html">
   Einleitung zu diesem Block
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_02_For_Loops.html">
   Übung: For Loops (Teil I)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_03_For_Loops.html">
   Übung: For Loops (Teil II)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_04_Zeckenstich_Simulation.html">
   Übung: Zeckenstich Simulation mit Loop
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_05_GIS_in_Python.html">
   Übung: GIS in Python
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Übung: Waldanteil berechnen
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Anhang
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="04_01_Jupyter_Shortcuts.html">
   Basic shortcuts for Jupyter lab
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Built with ❤ and <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Navigation umschalten" aria-controls="site-navigation"
            title="Navigation umschalten" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Laden Sie diese Seite herunter"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/03_06_Waldanteil_Berechnen.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Quelldatei herunterladen" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="In PDF drucken"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Vollbildmodus"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        
        <a class="jupyterhub-button" href="https://jupyterhub01.zhaw.ch/hub/user-redirect/git-pull?repo=https://github.com/ratnanil/codingingis&urlpath=lab/tree/codingingis/03_06_Waldanteil_Berechnen.ipynb&branch=master"><button type="button"
                class="btn btn-secondary topbarbtn" title="Starten JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Inhalt
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ubung-1-wald-oder-nicht-wald">
   Übung 1: Wald oder nicht Wald?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ubung-2-anteil-der-punkte-pro-gruppe">
   Übung 2: Anteil der Punkte pro „Gruppe“
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ubung-3-anteil-im-wald-pro-run-ermitteln">
   Übung 3: Anteil
   <em>
    im Wald
   </em>
   pro Run ermitteln
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ubung-3-mittelwerte-visualisieren">
   Übung 3: Mittelwerte Visualisieren
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="ubung-waldanteil-berechnen">
<h1>Übung: Waldanteil berechnen<a class="headerlink" href="#ubung-waldanteil-berechnen" title="Link zu dieser Überschrift">¶</a></h1>
<p>Nun sind wir so weit, dass wir 50 Simulation der Zeckenstiche mit zufällig verschobenen Punkten vorbereitet haben. Wir haben also die gleiche Ausgangslage, mit der ihr den Themenblock „Datenqualität und Unsicherheiten“ gestartet habt. In der Todo-Liste sind wir nun bei Schritt 4:</p>
<ul class="simple">
<li><p>Schritt 1: Einen Einzelpunkt zufällig verschieben ✓</p></li>
<li><p>Schritt 2: Alle Punkte einer DataFrame zufällig verschieben (1 „Run“) ✓</p></li>
<li><p>Schritt 3: Alle Punkte einer DataFrame mehrfach zufällig verschieben (z.B. 50 „Runs“) ✓</p></li>
<li><p><strong>Schritt 4: Anteil der Punkte im Wald pro „Run“ ermitteln</strong>
<strong>1. Für jeden Simulierten Punkt zu bestimmen ob er innerhalb oder ausserhalb des Waldes liegt</strong>
<strong>2. Den Anteil der Punkte im Wald pro Simulation zu bestimmen</strong></p></li>
</ul>
<p>Lade dafür den Datensatz „wald.gpkg“ von Moodle herunter und verschiebt es in eure <em>Working directory</em>. Importiere „wald.gpkg“ mit <code class="docutils literal notranslate"><span class="pre">pd.read_file()</span></code> und speichere es als Variable <code class="docutils literal notranslate"><span class="pre">wald</span></code>.</p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

<span class="n">monte_carlo_df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;monte_carlo_df.gpkg&quot;</span><span class="p">)</span> <span class="c1"># oder .shp, je nach dem wie ihr es gespeichert habt</span>

<span class="n">wald</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;wald.gpkg&quot;</span><span class="p">)</span>


<span class="n">wald</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/geopandas/_compat.py:88: UserWarning: The Shapely GEOS version (3.8.0-CAPI-1.13.1 ) is incompatible with the GEOS version PyGEOS was compiled with (3.8.1-CAPI-1.13.3). Conversions between both will be slow.
  shapely_geos_version, geos_capi_version_string
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Wald</th>
      <th>Shape_Leng</th>
      <th>Shape_Area</th>
      <th>Wald_text</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>947316.853401</td>
      <td>2.380876e+08</td>
      <td>nein</td>
      <td>MULTIPOLYGON Z (((2692100.000 1256542.253 276....</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>921225.341854</td>
      <td>7.963237e+07</td>
      <td>ja</td>
      <td>MULTIPOLYGON Z (((2689962.355 1245335.250 644....</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># hierfür braucht ihr das modul &quot;descartes&quot;</span>
<span class="n">wald</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;Wald_text&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:&gt;
</pre></div>
</div>
<img alt="_images/03_06_Waldanteil_Berechnen_3_1.png" src="_images/03_06_Waldanteil_Berechnen_3_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">monte_carlo_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;ID&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:&gt;
</pre></div>
</div>
<img alt="_images/03_06_Waldanteil_Berechnen_4_1.png" src="_images/03_06_Waldanteil_Berechnen_4_1.png" />
</div>
</div>
<div class="section" id="ubung-1-wald-oder-nicht-wald">
<h2>Übung 1: Wald oder nicht Wald?<a class="headerlink" href="#ubung-1-wald-oder-nicht-wald" title="Link zu dieser Überschrift">¶</a></h2>
<p>Als erstes stellt sich die Frage, welche Punkte sich innerhalb eines Wald-Polygons befinden. In GIS Terminologie handelt es sich hier um einen <em>Spatial Join</em>.</p>
<p><em>Spatial Join</em> ist als Funktion im Modul <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> mit dem namen <code class="docutils literal notranslate"><span class="pre">sjoin</span></code> vorhanden. Wie auf <a class="reference external" href="https://geopandas.org/reference/geopandas.sjoin.html">der Hilfeseite</a> beschrieben, müssen wir dieser <em>Function</em> zwei <em>GeoDataFrames</em> übergeben, die ge-joined werden sollen. Es können weitere, optionale Parameter angepasst werden, doch bei uns passen die Default werte.</p>
<p>Führe <code class="docutils literal notranslate"><span class="pre">gpd.sjoin()</span></code> auf die beiden Datensätze <code class="docutils literal notranslate"><span class="pre">monte_carlo_df</span></code> und <code class="docutils literal notranslate"><span class="pre">wald</span></code> aus. Beachte, das die Reihenfolge, mit welchen du die beiden GeoDataFrames der Funktion übergibst eine Rolle spielt. Versuche beide Varianten und wähle die korrekte aus. Stelle dir dazu die Frage: Was für ein Geometrietyp (Punkt / Linie / Polygon) soll der Output haben? Speichere den Output als <code class="docutils literal notranslate"><span class="pre">mote_carlo_sjoin</span></code>.
Hinweis: Allenfalls müssen das Koordinatensystem der beiden GeoDataFrames nochmals explizit gesetzt werden (z.B. mit <code class="docutils literal notranslate"><span class="pre">wald.set_crs(epsg</span> <span class="pre">=</span> <span class="pre">2056,allow_override</span> <span class="pre">=</span> <span class="pre">True)</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">monte_carlo_sjoin</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">sjoin</span><span class="p">(</span><span class="n">monte_carlo_df</span><span class="p">,</span><span class="n">wald</span><span class="p">)</span>

<span class="n">monte_carlo_sjoin</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>x</th>
      <th>y</th>
      <th>Run_Nr</th>
      <th>geometry</th>
      <th>index_right</th>
      <th>Wald</th>
      <th>Shape_Leng</th>
      <th>Shape_Area</th>
      <th>Wald_text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2550</td>
      <td>2.679638e+06</td>
      <td>1.253236e+06</td>
      <td>0</td>
      <td>POINT (2679637.654 1253235.744)</td>
      <td>0</td>
      <td>0</td>
      <td>947316.853401</td>
      <td>2.380876e+08</td>
      <td>nein</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10437</td>
      <td>2.681770e+06</td>
      <td>1.250434e+06</td>
      <td>0</td>
      <td>POINT (2681770.014 1250433.908)</td>
      <td>0</td>
      <td>0</td>
      <td>947316.853401</td>
      <td>2.380876e+08</td>
      <td>nein</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9174</td>
      <td>2.679342e+06</td>
      <td>1.249549e+06</td>
      <td>0</td>
      <td>POINT (2679341.656 1249549.219)</td>
      <td>0</td>
      <td>0</td>
      <td>947316.853401</td>
      <td>2.380876e+08</td>
      <td>nein</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8773</td>
      <td>2.681573e+06</td>
      <td>1.251779e+06</td>
      <td>0</td>
      <td>POINT (2681573.215 1251778.888)</td>
      <td>0</td>
      <td>0</td>
      <td>947316.853401</td>
      <td>2.380876e+08</td>
      <td>nein</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2764</td>
      <td>2.680121e+06</td>
      <td>1.250335e+06</td>
      <td>0</td>
      <td>POINT (2680120.913 1250335.441)</td>
      <td>0</td>
      <td>0</td>
      <td>947316.853401</td>
      <td>2.380876e+08</td>
      <td>nein</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="ubung-2-anteil-der-punkte-pro-gruppe">
<h2>Übung 2: Anteil der Punkte pro „Gruppe“<a class="headerlink" href="#ubung-2-anteil-der-punkte-pro-gruppe" title="Link zu dieser Überschrift">¶</a></h2>
<p>Jetzt wirds etwas kniffelig. Um die Anzahl Punkte innerhalb / ausserhalb vom Wald zu zählen, brauchen wir die <code class="docutils literal notranslate"><span class="pre">groupby</span></code> und <code class="docutils literal notranslate"><span class="pre">size</span></code> aus der Pandas Bibliothek. Es würde den Rahmen von diesem Kurs sprengen, euch die Einzelschritte im Detail zu erläutern, deshalb gebe ich euch den fertigen Code den ihr auf euren Datensatz anwenden könnt.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anteile</span> <span class="o">=</span> <span class="n">monte_carlo_sjoin</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;Run_Nr&quot;</span><span class="p">,</span> <span class="s2">&quot;Wald_text&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="s2">&quot;Anzahl&quot;</span><span class="p">)</span>
<span class="n">anteile</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Anzahl</th>
    </tr>
    <tr>
      <th>Run_Nr</th>
      <th>Wald_text</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">0</th>
      <th>ja</th>
      <td>1</td>
    </tr>
    <tr>
      <th>nein</th>
      <td>9</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">1</th>
      <th>ja</th>
      <td>2</td>
    </tr>
    <tr>
      <th>nein</th>
      <td>8</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">2</th>
      <th>ja</th>
      <td>2</td>
    </tr>
    <tr>
      <th>nein</th>
      <td>8</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">3</th>
      <th>ja</th>
      <td>2</td>
    </tr>
    <tr>
      <th>nein</th>
      <td>8</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">4</th>
      <th>ja</th>
      <td>1</td>
    </tr>
    <tr>
      <th>nein</th>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Wir sehen in der obigen Tabelle für jeden Run (Spalte „Run_Nr“) die Anzahl Werte im Wald („ja“) und ausserhalb („nein“). Beachte</p>
<ul class="simple">
<li><p>das die Summe aus „ja“ + „nein“ pro Run gleich gross ist, da wir ja immer gleich viele Zeckenstiche pro Run haben.</p></li>
<li><p>das auch alle Zeckenstiche in einer Gruppe landen können (also alle innerhalb oder alle ausserhalb des Waldes)</p></li>
</ul>
<p>Im Nächsten Schritt „pivotiere“ ich die Tabelle so, dass „ja“ und „nein“ einzelne Spalten sind.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anteile_pivot</span> <span class="o">=</span> <span class="n">anteile</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="s2">&quot;Run_Nr&quot;</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="s2">&quot;Wald_text&quot;</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="s2">&quot;Anzahl&quot;</span><span class="p">,</span> <span class="n">fill_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># mit fill_value = 0 spezifiziere ich, dass der Wert &quot;0&quot; sein soll wenn</span>
<span class="c1"># in einem Run kein Wert in &quot;ja&quot; oder &quot;nein&quot; vorhanden sind</span>
<span class="c1"># (sprich: wenn alle Stiche entweder innerhalb oder ausserhalb</span>
<span class="c1"># des Waldes gelandet sind)</span>

<span class="n">anteile_pivot</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Wald_text</th>
      <th>ja</th>
      <th>nein</th>
    </tr>
    <tr>
      <th>Run_Nr</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>9</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>8</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>8</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>8</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="ubung-3-anteil-im-wald-pro-run-ermitteln">
<h2>Übung 3: Anteil <em>im Wald</em> pro Run ermitteln<a class="headerlink" href="#ubung-3-anteil-im-wald-pro-run-ermitteln" title="Link zu dieser Überschrift">¶</a></h2>
<p>Berechnet den Anteil im Wald indem du die die Spalte „ja“ mit der Summe aus den Spalten „Ja“ + „Nein“ dividierst. Nutze dafür die Eckigen Klammern (<code class="docutils literal notranslate"><span class="pre">[</span></code>/<code class="docutils literal notranslate"><span class="pre">]</span></code>) sowie die Splatennamen. Speichere den Output als <code class="docutils literal notranslate"><span class="pre">anteil_ja</span></code>.</p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anteil_ja</span> <span class="o">=</span> <span class="n">anteile_pivot</span><span class="p">[</span><span class="s2">&quot;ja&quot;</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="n">anteile_pivot</span><span class="p">[</span><span class="s2">&quot;ja&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">anteile_pivot</span><span class="p">[</span><span class="s2">&quot;nein&quot;</span><span class="p">])</span>

<span class="n">anteil_ja</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Run_Nr
0    0.1
1    0.2
2    0.2
3    0.2
4    0.1
dtype: float64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="ubung-3-mittelwerte-visualisieren">
<h2>Übung 3: Mittelwerte Visualisieren<a class="headerlink" href="#ubung-3-mittelwerte-visualisieren" title="Link zu dieser Überschrift">¶</a></h2>
<p>Gratuliere! Wenn du an diesem Punkt angekommen bist hast du eine ganze Monte Carlo Simulation von A bis Z mit Python durchgeführt. Von hier an steht dir der Weg frei für noch komplexere Analysen. Zum Abschluss kannst du die Mittelwerte wir nun auf einfache Weise visualisieren. Versuche dabei die Methods <code class="docutils literal notranslate"><span class="pre">plot()</span></code> und <code class="docutils literal notranslate"><span class="pre">plot.box()</span></code> sowie <code class="docutils literal notranslate"><span class="pre">plot.hist()</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anteil_ja</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;Run_Nr&#39;&gt;
</pre></div>
</div>
<img alt="_images/03_06_Waldanteil_Berechnen_14_1.png" src="_images/03_06_Waldanteil_Berechnen_14_1.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anteil_ja</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:&gt;
</pre></div>
</div>
<img alt="_images/03_06_Waldanteil_Berechnen_15_1.png" src="_images/03_06_Waldanteil_Berechnen_15_1.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anteil_ja</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:ylabel=&#39;Frequency&#39;&gt;
</pre></div>
</div>
<img alt="_images/03_06_Waldanteil_Berechnen_16_1.png" src="_images/03_06_Waldanteil_Berechnen_16_1.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="03_05_GIS_in_Python.html" title="previous page">Übung: GIS in Python</a>
    <a class='right-next' id="next-link" href="04_01_Jupyter_Shortcuts.html" title="next page">Basic shortcuts for Jupyter lab</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Nils Ratnaweera<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.30270b6e4c972e43c488.js"></script>


    
  </body>
</html>